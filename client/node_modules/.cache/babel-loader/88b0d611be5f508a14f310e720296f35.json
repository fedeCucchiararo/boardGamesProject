{"ast":null,"code":"import _regeneratorRuntime from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/src/components/Landing/Landing.js\";\nimport React, { Component } from 'react';\nimport './Landing.css';\nimport Snackbar from '../Snackbar/Snackbar';\nimport GameList from '../GameList/GameList';\nimport logic from '../../logic';\nimport PlayList from '../PlayList/PlayList';\nimport PlaySaveModal from '../PlaySaveModal/PlaySaveModal';\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from \"react-router-dom\";\nimport GameInfoModal from '../GameInfoModal/GameInfoModal';\nimport { CSSTransition } from 'react-transition-group';\nimport { Tabs } from \"@yazanaabed/react-tabs\";\n/** Pagination */\n\nimport Countries from 'countries-api';\nimport Pagination from '../Pagination/Pagination';\nimport CountryCard from '../CountryCard/CountryCard';\n\nvar Landing =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Landing, _Component);\n\n  function Landing() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Landing);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Landing)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: null,\n      allGames: [],\n      ownedGames: [],\n      showGameInfo: false,\n      showPlaySaveModal: false,\n      game: {},\n      search: '',\n      plays: [],\n      allCountries: [],\n      currentGames: [],\n      currentPage: null,\n      totalPages: null\n    };\n\n    _this.onPageChanged = function (data) {\n      var allCountries = _this.state.allCountries;\n      var currentPage = data.currentPage,\n          totalPages = data.totalPages,\n          pageLimit = data.pageLimit;\n      var offset = (currentPage - 1) * pageLimit;\n      var currentGames = allCountries.slice(offset, offset + pageLimit);\n\n      _this.setState({\n        currentPage: currentPage,\n        currentGames: currentGames,\n        totalPages: totalPages\n      });\n    };\n\n    _this.updateSearch = function (event) {\n      _this.setState({\n        search: event.target.value\n      });\n    };\n\n    _this.changeHandler = function (event) {\n      console.log(event.target.value);\n    };\n\n    _this.moreInfoHandler = function (game) {\n      _this.setState(function () {\n        return {\n          game: _objectSpread({}, game),\n          showGameInfo: !_this.state.showGameInfo\n        };\n      });\n    };\n\n    _this.savePlayClickHandler = function (game) {\n      _this.setState(function () {\n        return {\n          game: _objectSpread({}, game),\n          showPlaySaveModal: !_this.state.showPlaySaveModal\n        };\n      });\n    };\n\n    _this.closePlaySaveModalHandler = function () {\n      _this.setState(function () {\n        return {\n          showPlaySaveModal: !_this.state.showPlaySaveModal\n        };\n      });\n    };\n\n    _this.closeModalHandler = function () {\n      _this.setState(function () {\n        return {\n          showGameInfo: !_this.state.showGameInfo\n        };\n      });\n    };\n\n    _this.mechanicsClickHandler = function (mechanic) {\n      console.log(mechanic);\n    };\n\n    _this.addOrRemoveHandler = function (fromOwned, gameId) {\n      if (fromOwned) {\n        logic.removeGameFromOwnedGames(gameId).then(\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee() {\n          var ownedGames;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return logic.getUserOwnedGames(logic._userId);\n\n                case 2:\n                  ownedGames = _context.sent;\n\n                  _this.setState(function () {\n                    return {\n                      ownedGames: _toConsumableArray(ownedGames.data)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }))).catch(function (err) {\n          _this.setState(function () {\n            return {\n              error: err.message\n            };\n          });\n        });\n      } else {\n        logic.addGameToOwnedGames(gameId).then(\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          var ownedGames;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return logic.getUserOwnedGames(logic._userId);\n\n                case 2:\n                  ownedGames = _context2.sent;\n\n                  _this.setState(function () {\n                    return {\n                      ownedGames: _toConsumableArray(ownedGames.data)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }))).catch(function (err) {\n          _this.setState(function () {\n            return {\n              error: err.message\n            };\n          });\n        });\n      }\n    };\n\n    _this.playSaveErrorHandler = function (err) {\n      _this.setState(function () {\n        return {\n          error: err\n        };\n      });\n    };\n\n    _this.playSaveHandler = function (notes, date, players, gameId) {\n      logic.registerPlay(notes, date, players, gameId).then(\n      /*#__PURE__*/\n      function () {\n        var _ref3 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3(res) {\n          var plays;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return logic.getUserPlays(logic._userId);\n\n                case 2:\n                  plays = _context3.sent;\n\n                  _this.setState(function () {\n                    return {\n                      error: res.message,\n                      plays: _toConsumableArray(plays)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        return function (_x) {\n          return _ref3.apply(this, arguments);\n        };\n      }()).catch(function (err) {\n        return _this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    _this.playDeleteHandler = function (playId) {\n      logic.deletePlay(playId).then(\n      /*#__PURE__*/\n      function () {\n        var _ref4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee4(res) {\n          var plays;\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return logic.getUserPlays(logic._userId);\n\n                case 2:\n                  plays = _context4.sent;\n\n                  _this.setState(function () {\n                    return {\n                      error: res.message,\n                      plays: _toConsumableArray(plays)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this);\n        }));\n\n        return function (_x2) {\n          return _ref4.apply(this, arguments);\n        };\n      }()).catch(function (err) {\n        return _this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    _this.closeErrorSnackbarHandler = function () {\n      _this.setState(function () {\n        return {\n          error: ''\n        };\n      });\n    };\n\n    _this.goBackHandler = function () {\n      return _this.props.history.push('/');\n    };\n\n    _this.handleSignUpClick = function () {\n      return _this.props.history.push('/register');\n    };\n\n    _this.handleSignInClick = function () {\n      return _this.props.history.push('/login');\n    };\n\n    return _this;\n  }\n\n  _createClass(Landing, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var allGames, ownedGames, plays;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return logic.getAllGames();\n\n              case 2:\n                allGames = _context5.sent;\n                this.setState(function (prevState, props) {\n                  return {\n                    allGames: _toConsumableArray(allGames.data),\n                    allCountries: _toConsumableArray(allGames.data)\n                  };\n                });\n\n                if (!logic.loggedIn) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                _context5.next = 7;\n                return logic.getUserOwnedGames(logic._userId);\n\n              case 7:\n                ownedGames = _context5.sent;\n                _context5.next = 10;\n                return logic.getUserPlays(logic._userId);\n\n              case 10:\n                plays = _context5.sent;\n                this.setState(function () {\n                  return {\n                    ownedGames: _toConsumableArray(ownedGames.data),\n                    plays: _toConsumableArray(plays)\n                  };\n                });\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          allCountries = _this$state.allCountries,\n          currentGames = _this$state.currentGames,\n          currentPage = _this$state.currentPage,\n          totalPages = _this$state.totalPages;\n      var totalCountries = allCountries.length;\n      if (totalCountries === 0) return null;\n      var headerClass = ['text-dark py-2 pr-4 m-0', currentPage ? 'border-gray border-right' : ''].join(' ').trim();\n      var searchQuery = this.state.search.replace(/\\s+/g, '').toLowerCase();\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, this.state.error ? React.createElement(Snackbar, {\n        onCloseSnackbar: this.closeErrorSnackbarHandler,\n        message: this.state.error,\n        className: 'snackbar',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }) : null, React.createElement(GameInfoModal, {\n        onMechanicsClick: this.mechanicsClickHandler,\n        onClose: this.closeModalHandler,\n        show: this.state.showGameInfo,\n        onAdd: this.addHandler,\n        game: this.state.game,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }), React.createElement(PlaySaveModal, {\n        onClose: this.closePlaySaveModalHandler,\n        show: this.state.showPlaySaveModal,\n        onPlaySave: this.playSaveHandler,\n        game: this.state.game,\n        onError: this.playSaveErrorHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"header-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-expand-sm navbar-light bg-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"navbar-brand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Navbar\"), React.createElement(\"button\", {\n        className: \"navbar-toggler\",\n        type: \"button\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#navbarTogglerDemo02\",\n        \"aria-controls\": \"navbarTogglerDemo02\",\n        \"aria-expanded\": \"false\",\n        \"aria-label\": \"Toggle navigation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"navbar-toggler-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"collapse navbar-collapse\",\n        id: \"navbarTogglerDemo02\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"navbar-nav mr-auto mt-2 mt-sm-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"BGG\")), logic.loggedIn ? React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        onClick: this.props.onLogoutClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"Sign out\")) : React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        onClick: this.handleSignInClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, \"Sing In\")), logic.loggedIn ? null : React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        onClick: this.handleSignUpClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, \"Sign Up\"))))), React.createElement(\"div\", {\n        className: \"header__main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"header__form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.search,\n        type: \"text\",\n        onChange: this.updateSearch,\n        placeholder: \"Search a game\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      })))), React.createElement(Tabs, {\n        activeTab: {\n          id: \"tab1\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(Tabs.Tab, {\n        id: \"tab1\",\n        title: \"All Games\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(GameList, {\n        onSavePlayClick: this.savePlayClickHandler,\n        onAddOrRemoveClick: this.addOrRemoveHandler,\n        onMoreInfoClick: this.moreInfoHandler,\n        games: this.state.allGames,\n        searchQuery: searchQuery,\n        loggedIn: logic.loggedIn,\n        title: 'All Games',\n        fromOwned: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      })), logic.loggedIn ? React.createElement(Tabs.Tab, {\n        id: \"tab2\",\n        title: \"My Games\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(GameList, {\n        onSavePlayClick: this.savePlayClickHandler,\n        onAddOrRemoveClick: this.addOrRemoveHandler,\n        onMoreInfoClick: this.moreInfoHandler,\n        games: this.state.ownedGames,\n        searchQuery: searchQuery,\n        loggedIn: logic.loggedIn,\n        title: 'My Games',\n        fromOwned: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      })) : null, logic.loggedIn ? React.createElement(Tabs.Tab, {\n        id: \"tab3\",\n        title: \"My Plays\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(PlayList, {\n        onPlayDelete: this.playDeleteHandler,\n        plays: this.state.plays,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      })) : null), React.createElement(\"footer\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349\n        },\n        __self: this\n      }, \" This is the footer \"))), React.createElement(\"div\", {\n        className: \"container mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row d-flex flex-row py-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"w-100 px-4 py-5 d-flex flex-row flex-wrap align-items-center justify-content-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex flex-row align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: headerClass,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        className: \"text-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, totalCountries), \" Games\"), currentPage && React.createElement(\"span\", {\n        className: \"current-page d-inline-block h-100 pl-4 text-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, \"Page \", React.createElement(\"span\", {\n        className: \"font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, currentPage), \" / \", React.createElement(\"span\", {\n        className: \"font-weight-bold\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, totalPages))), React.createElement(\"div\", {\n        className: \"d-flex flex-row py-4 align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        totalRecords: totalCountries,\n        pageLimit: 18,\n        pageNeighbours: 1,\n        onPageChanged: this.onPageChanged,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      }))), currentGames.map(function (game) {\n        return React.createElement(CountryCard, {\n          key: game.id,\n          game: game,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 378\n          },\n          __self: this\n        });\n      }))));\n    }\n  }]);\n\n  return Landing;\n}(Component);\n\nexport default withRouter(Landing);","map":{"version":3,"sources":["/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/src/components/Landing/Landing.js"],"names":["React","Component","Snackbar","GameList","logic","PlayList","PlaySaveModal","BrowserRouter","Router","Route","Link","Redirect","withRouter","GameInfoModal","CSSTransition","Tabs","Countries","Pagination","CountryCard","Landing","state","error","allGames","ownedGames","showGameInfo","showPlaySaveModal","game","search","plays","allCountries","currentGames","currentPage","totalPages","onPageChanged","data","pageLimit","offset","slice","setState","updateSearch","event","target","value","changeHandler","console","log","moreInfoHandler","savePlayClickHandler","closePlaySaveModalHandler","closeModalHandler","mechanicsClickHandler","mechanic","addOrRemoveHandler","fromOwned","gameId","removeGameFromOwnedGames","then","getUserOwnedGames","_userId","catch","err","message","addGameToOwnedGames","playSaveErrorHandler","playSaveHandler","notes","date","players","registerPlay","res","getUserPlays","playDeleteHandler","playId","deletePlay","closeErrorSnackbarHandler","goBackHandler","props","history","push","handleSignUpClick","handleSignInClick","getAllGames","prevState","loggedIn","totalCountries","length","headerClass","join","trim","searchQuery","replace","toLowerCase","addHandler","onLogoutClick","id","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './Landing.css'\nimport Snackbar from '../Snackbar/Snackbar'\nimport GameList from '../GameList/GameList'\nimport logic from '../../logic'\nimport PlayList from '../PlayList/PlayList'\nimport PlaySaveModal from '../PlaySaveModal/PlaySaveModal'\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from \"react-router-dom\"\nimport GameInfoModal from '../GameInfoModal/GameInfoModal'\nimport { CSSTransition } from 'react-transition-group'\nimport { Tabs } from \"@yazanaabed/react-tabs\";\n\n/** Pagination */\n\nimport Countries from 'countries-api';\n\nimport Pagination from '../Pagination/Pagination';\nimport CountryCard from '../CountryCard/CountryCard';\n\n\nclass Landing extends Component {\n\n    state = {\n        error: null,\n        allGames: [],\n        ownedGames: [],\n        showGameInfo: false,\n        showPlaySaveModal: false,\n        game: {},\n        search: '',\n        plays: [],\n        allCountries: [],\n        currentGames: [],\n        currentPage: null,\n        totalPages: null\n    }\n\n\n    async componentDidMount() {\n\n        let allGames = await logic.getAllGames()\n\n        this.setState((prevState, props) => {\n            return ({\n                allGames: [...allGames.data],\n                allCountries: [...allGames.data]\n            })\n        })\n\n        if (logic.loggedIn) {\n            let ownedGames = await logic.getUserOwnedGames(logic._userId)\n            let plays = await logic.getUserPlays(logic._userId)\n\n            this.setState(() => {\n                return ({\n                    ownedGames: [...ownedGames.data],\n                    plays: [...plays]\n                })\n            })\n        }\n    }\n\n    onPageChanged = data => {\n        const { allCountries } = this.state;\n        const { currentPage, totalPages, pageLimit } = data;\n\n        const offset = (currentPage - 1) * pageLimit;\n        const currentGames = allCountries.slice(offset, offset + pageLimit);\n\n        this.setState({ currentPage, currentGames, totalPages });\n    }\n\n    updateSearch = (event) => {\n        this.setState({ search: event.target.value })\n    }\n\n    changeHandler = (event) => {\n        console.log(event.target.value)\n    }\n\n    moreInfoHandler = (game) => {\n        this.setState(() => {\n            return ({\n                game: { ...game },\n                showGameInfo: !this.state.showGameInfo\n            })\n        })\n    }\n\n    savePlayClickHandler = (game) => {\n        this.setState(() => {\n            return ({\n                game: { ...game },\n                showPlaySaveModal: !this.state.showPlaySaveModal\n            })\n        })\n    }\n\n    closePlaySaveModalHandler = () => {\n        this.setState(() => {\n            return ({\n                showPlaySaveModal: !this.state.showPlaySaveModal\n            })\n        })\n    }\n\n    closeModalHandler = () => {\n        this.setState(() => {\n            return ({\n                showGameInfo: !this.state.showGameInfo\n            })\n        })\n    }\n\n    mechanicsClickHandler = (mechanic) => {\n        console.log(mechanic)\n    }\n\n    addOrRemoveHandler = (fromOwned, gameId) => {\n\n        if (fromOwned) {\n\n            logic.removeGameFromOwnedGames(gameId)\n                .then(async () => {\n                    let ownedGames = await logic.getUserOwnedGames(logic._userId)\n                    this.setState(() => {\n                        return ({\n                            ownedGames: [...ownedGames.data]\n                        })\n                    })\n                })\n                .catch(err => {\n                    this.setState(() => {\n                        return ({\n                            error: err.message\n                        })\n                    })\n                })\n\n        } else {\n\n            logic.addGameToOwnedGames(gameId)\n                .then(async () => {\n                    let ownedGames = await logic.getUserOwnedGames(logic._userId)\n                    this.setState(() => {\n                        return ({\n                            ownedGames: [...ownedGames.data]\n                        })\n                    })\n                })\n                .catch(err => {\n                    this.setState(() => {\n                        return ({\n                            error: err.message\n                        })\n                    })\n                })\n\n\n        }\n    }\n\n    playSaveErrorHandler = err => {\n        this.setState(() => {\n            return ({\n                error: err\n            })\n        })\n    }\n\n    playSaveHandler = (notes, date, players, gameId) => {\n\n        logic.registerPlay(notes, date, players, gameId)\n            .then(async (res) => {\n                let plays = await logic.getUserPlays(logic._userId)\n                this.setState(() => {\n                    return ({\n                        error: res.message,\n                        plays: [...plays]\n                    })\n                })\n            })\n            .catch(err => this.setState({ error: err.message }))\n    }\n\n    playDeleteHandler = (playId) => {\n\n        logic.deletePlay(playId)\n            .then(async (res) => {\n                let plays = await logic.getUserPlays(logic._userId)\n                this.setState(() => {\n                    return ({\n                        error: res.message,\n                        plays: [...plays]\n                    })\n                })\n            })\n            .catch(err => this.setState({ error: err.message }))\n    }\n\n    closeErrorSnackbarHandler = () => {\n        this.setState(() => {\n            return ({\n                error: ''\n            })\n        })\n    }\n\n    goBackHandler = () => this.props.history.push('/')\n\n    handleSignUpClick = () => this.props.history.push('/register')\n\n    handleSignInClick = () => this.props.history.push('/login')\n\n\n\n\n    render() {\n\n        const { allCountries, currentGames, currentPage, totalPages } = this.state;\n        const totalCountries = allCountries.length;\n\n        if (totalCountries === 0) return null;\n\n        const headerClass = ['text-dark py-2 pr-4 m-0', currentPage ? 'border-gray border-right' : ''].join(' ').trim();\n\n        let searchQuery = this.state.search.replace(/\\s+/g, '').toLowerCase()\n\n        return (\n            <div>\n\n                {\n                    this.state.error ?\n                        <Snackbar\n                            onCloseSnackbar={this.closeErrorSnackbarHandler}\n                            message={this.state.error}\n                            className={'snackbar'}\n                        />\n                        : null\n                }\n\n                < GameInfoModal\n                    onMechanicsClick={this.mechanicsClickHandler}\n                    onClose={this.closeModalHandler}\n                    show={this.state.showGameInfo}\n                    onAdd={this.addHandler}\n                    game={this.state.game}\n                />\n\n                <PlaySaveModal\n                    onClose={this.closePlaySaveModalHandler}\n                    show={this.state.showPlaySaveModal}\n                    onPlaySave={this.playSaveHandler}\n                    game={this.state.game}\n                    onError={this.playSaveErrorHandler}\n                />\n\n                <div className='landing' >\n                    <header className='header-container'>\n                        <nav className=\"navbar navbar-expand-sm navbar-light bg-light\">\n                            <p className=\"navbar-brand\">Navbar</p>\n                            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarTogglerDemo02\" aria-controls=\"navbarTogglerDemo02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                                <span className=\"navbar-toggler-icon\" />\n                            </button>\n                            <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\n                                <ul className=\"navbar-nav mr-auto mt-2 mt-sm-0\">\n                                    <li className=\"nav-item\">\n                                        <p className=\"nav-link\" >BGG</p>\n                                    </li>\n                                    {logic.loggedIn ?\n                                        <li className=\"nav-item\">\n                                            <p className=\"nav-link\" onClick={this.props.onLogoutClick}>Sign out</p>\n                                        </li> :\n                                        <li className=\"nav-item\">\n                                            <p className=\"nav-link\" onClick={this.handleSignInClick}>Sing In</p>\n                                        </li>\n                                    }\n\n                                    {logic.loggedIn ?\n                                        null :\n                                        <li className=\"nav-item\">\n                                            <p className=\"nav-link\" onClick={this.handleSignUpClick}>Sign Up</p>\n                                        </li>\n                                    }\n\n                                </ul>\n                            </div>\n                        </nav>\n                        <div className='header__main'>\n\n\n                            {/********        ********/}\n                            {/******** Search ********/}\n                            {/********        ********/}\n                            <form className='header__form'>\n                                <input value={this.state.search} type='text' onChange={this.updateSearch} placeholder='Search a game' />\n                                <input type='submit' />\n                            </form>\n                            {/* {this.state.search ? <SearchPreview searchQuery={this.state.search} onAddOrRemoveClick={this.addOrRemoveHandler} fromOwned={false} onMoreInfoClick={this.moreInfoHandler} title={'Search result'} games={this.state.allGames} /> : null} */}\n\n                            {/* <Search allGames={this.state.allGames} onChange={this.updateSearch}/> */}\n                        </div>\n                    </header>\n\n                    <Tabs\n                        activeTab={{\n                            id: \"tab1\"\n                        }}\n                    >\n                        <Tabs.Tab id=\"tab1\" title='All Games'>\n                            {/** Show all games */}\n                            <GameList\n                                onSavePlayClick={this.savePlayClickHandler}\n                                onAddOrRemoveClick={this.addOrRemoveHandler}\n                                onMoreInfoClick={this.moreInfoHandler}\n                                games={this.state.allGames}\n                                searchQuery={searchQuery}\n                                loggedIn={logic.loggedIn}\n                                title={'All Games'}\n                                fromOwned={false}\n                            />\n                        </Tabs.Tab>\n\n                        {logic.loggedIn ?\n                            <Tabs.Tab id=\"tab2\" title='My Games'>\n                                {/** If logged in, then show \"my Games\" */}\n                                <GameList\n                                    onSavePlayClick={this.savePlayClickHandler}\n                                    onAddOrRemoveClick={this.addOrRemoveHandler}\n                                    onMoreInfoClick={this.moreInfoHandler}\n                                    games={this.state.ownedGames}\n                                    searchQuery={searchQuery}\n                                    loggedIn={logic.loggedIn}\n                                    title={'My Games'}\n                                    fromOwned={true}\n                                />\n                            </Tabs.Tab>\n                            : null\n                        }\n                        {logic.loggedIn ?\n                            <Tabs.Tab id=\"tab3\" title=\"My Plays\">\n                                <PlayList onPlayDelete={this.playDeleteHandler} plays={this.state.plays} />\n                            </Tabs.Tab>\n                            : null\n                        }\n                    </Tabs>\n\n                    <footer className='footer'>\n                        <h1> This is the footer </h1>\n                    </footer>\n                </div>\n\n                { /** Pagination */}\n\n                <div className=\"container mb-5\">\n                    <div className=\"row d-flex flex-row py-5\">\n\n                        <div className=\"w-100 px-4 py-5 d-flex flex-row flex-wrap align-items-center justify-content-between\">\n                            <div className=\"d-flex flex-row align-items-center\">\n\n                                <h2 className={headerClass}>\n                                    <strong className=\"text-secondary\">{totalCountries}</strong> Games\n                                </h2>\n\n                                {currentPage && (\n                                    <span className=\"current-page d-inline-block h-100 pl-4 text-secondary\">\n                                        Page <span className=\"font-weight-bold\">{currentPage}</span> / <span className=\"font-weight-bold\">{totalPages}</span>\n                                    </span>\n                                )}\n\n                            </div>\n\n                            <div className=\"d-flex flex-row py-4 align-items-center\">\n                                <Pagination totalRecords={totalCountries} pageLimit={18} pageNeighbours={1} onPageChanged={this.onPageChanged} />\n                            </div>\n                        </div>\n\n                        {currentGames.map(game => <CountryCard key={game.id} game={game} />)}\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}\n\n\nexport default withRouter(Landing)"]},"metadata":{},"sourceType":"module"}