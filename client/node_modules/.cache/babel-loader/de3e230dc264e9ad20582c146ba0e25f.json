{"ast":null,"code":"import _toConsumableArray from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/src/components/Home/Home.js\";\nimport React, { Component } from 'react';\nimport './Home.css';\nimport Snackbar from '../Snackbar/Snackbar';\nimport GameList from '../GameList/GameList';\nimport logic from '../../logic';\nimport PlayList from '../PlayList/PlayList';\nimport PlaySaveModal from '../PlaySaveModal/PlaySaveModal';\nimport PlayPicturesModal from '../PlayPicturesModal/PlayPicturesModal';\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from \"react-router-dom\";\nimport GameInfoModal from '../GameInfoModal/GameInfoModal';\nvar GAMES_PER_PAGE = 5;\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      error: null,\n      allGames: [],\n      ownedGames: [],\n      showGameInfo: false,\n      showPlaySaveModal: false,\n      showPlayPicturesModal: false,\n      playPictures: [],\n      game: {},\n      search: '',\n      plays: [],\n      currentGames: [],\n      currentPage: null,\n      totalPages: null,\n      page: 1,\n      pages: null\n    };\n\n    _this.updateSearch = function (event) {\n      _this.setState({\n        search: event.target.value\n      });\n    };\n\n    _this.changeHandler = function (event) {\n      console.log(event.target.value);\n    };\n\n    _this.moreInfoHandler = function (game) {\n      _this.setState(function () {\n        return {\n          game: _objectSpread({}, game),\n          showGameInfo: !_this.state.showGameInfo\n        };\n      });\n    };\n\n    _this.savePlayClickHandler = function (game) {\n      _this.setState(function () {\n        return {\n          game: _objectSpread({}, game),\n          showPlaySaveModal: !_this.state.showPlaySaveModal\n        };\n      });\n    };\n\n    _this.showPlayPicturesHandler =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(playId) {\n        var playPictures;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return logic.getPlayPictures(playId);\n\n              case 2:\n                playPictures = _context.sent;\n\n                if (playPictures.length) {\n                  _this.setState(function () {\n                    return {\n                      playPictures: playPictures,\n                      showPlayPicturesModal: !_this.state.showPlayPicturesModal\n                    };\n                  });\n                } else {\n                  _this.setState(function () {\n                    return {\n                      error: 'There are no pictures for this gameplay'\n                    };\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.closePlaySaveModalHandler = function () {\n      _this.setState(function () {\n        return {\n          showPlaySaveModal: !_this.state.showPlaySaveModal\n        };\n      });\n    };\n\n    _this.closePlayPicturesModalHandler = function () {\n      _this.setState(function () {\n        return {\n          showPlayPicturesModal: !_this.state.showPlayPicturesModal\n        };\n      });\n    };\n\n    _this.closeModalHandler = function () {\n      _this.setState(function () {\n        return {\n          showGameInfo: !_this.state.showGameInfo\n        };\n      });\n    };\n\n    _this.mechanicsClickHandler = function (mechanic) {\n      console.log(mechanic);\n    };\n\n    _this.addOrRemoveHandler = function (fromOwned, gameId) {\n      if (fromOwned) {\n        logic.removeGameFromOwnedGames(gameId).then(\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee2() {\n          var ownedGames;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return logic.getUserOwnedGames(logic._userId);\n\n                case 2:\n                  ownedGames = _context2.sent;\n\n                  _this.setState(function () {\n                    return {\n                      ownedGames: _toConsumableArray(ownedGames.data)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }))).catch(function (err) {\n          _this.setState(function () {\n            return {\n              error: err.message\n            };\n          });\n        });\n      } else {\n        logic.addGameToOwnedGames(gameId).then(\n        /*#__PURE__*/\n        _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee3() {\n          var ownedGames;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return logic.getUserOwnedGames(logic._userId);\n\n                case 2:\n                  ownedGames = _context3.sent;\n\n                  _this.setState(function () {\n                    return {\n                      ownedGames: _toConsumableArray(ownedGames.data)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }))).catch(function (err) {\n          _this.setState(function () {\n            return {\n              error: err.message\n            };\n          });\n        });\n      }\n    };\n\n    _this.playSaveErrorHandler = function (err) {\n      _this.setState(function () {\n        return {\n          error: err\n        };\n      });\n    };\n\n    _this.playSaveHandler = function (notes, date, players, gameId) {\n      logic.registerPlay(notes, date, players, gameId).then(\n      /*#__PURE__*/\n      function () {\n        var _ref4 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee4(res) {\n          var plays;\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return logic.getUserPlays(logic._userId);\n\n                case 2:\n                  plays = _context4.sent;\n\n                  _this.setState(function () {\n                    return {\n                      error: res.message,\n                      plays: _toConsumableArray(plays)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this);\n        }));\n\n        return function (_x2) {\n          return _ref4.apply(this, arguments);\n        };\n      }()).catch(function (err) {\n        return _this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    _this.pictureUploadHandler = function (event, playId) {\n      var file = event.target[0].files[0];\n      logic.addPictureToPlay(file, playId).then(function (res) {\n        _this.setState(function () {\n          return {\n            error: res.message\n          };\n        });\n      }).catch(function (err) {\n        return _this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    _this.playDeleteHandler = function (playId) {\n      logic.deletePlay(playId).then(\n      /*#__PURE__*/\n      function () {\n        var _ref5 = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee5(res) {\n          var plays;\n          return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  _context5.next = 2;\n                  return logic.getUserPlays(logic._userId);\n\n                case 2:\n                  plays = _context5.sent;\n\n                  _this.setState(function () {\n                    return {\n                      // error: res.message,\n                      plays: _toConsumableArray(plays)\n                    };\n                  });\n\n                case 4:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5, this);\n        }));\n\n        return function (_x3) {\n          return _ref5.apply(this, arguments);\n        };\n      }()).catch(function (err) {\n        return _this.setState({\n          error: err.message\n        });\n      });\n    };\n\n    _this.closeErrorSnackbarHandler = function () {\n      _this.setState(function () {\n        return {\n          error: ''\n        };\n      });\n    };\n\n    _this.loadMore =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6() {\n      var _this$state, page, allGames, nextData;\n\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _this$state = _this.state, page = _this$state.page, allGames = _this$state.allGames;\n              _context6.next = 3;\n              return logic.getAllGamesWithPagination(page + 1, GAMES_PER_PAGE);\n\n            case 3:\n              nextData = _context6.sent;\n              allGames.push.apply(allGames, _toConsumableArray(nextData.data.games));\n\n              _this.setState(function () {\n                return {\n                  page: nextData.data.paginationData.page,\n                  allGames: _toConsumableArray(allGames)\n                };\n              });\n\n            case 6:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this);\n    }));\n\n    _this.goBackHandler = function () {\n      return _this.props.history.push('/');\n    };\n\n    _this.handleSignUpClick = function () {\n      return _this.props.history.push('/register');\n    };\n\n    _this.handleSignInClick = function () {\n      return _this.props.history.push('/login');\n    };\n\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var res, ownedGames, plays;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return logic.getAllGamesWithPagination(1, GAMES_PER_PAGE);\n\n              case 2:\n                res = _context7.sent;\n                this.setState(function () {\n                  return {\n                    page: 1,\n                    pages: res.data.paginationData.pages,\n                    allGames: _toConsumableArray(res.data.games)\n                  };\n                });\n\n                if (!logic.loggedIn) {\n                  _context7.next = 12;\n                  break;\n                }\n\n                _context7.next = 7;\n                return logic.getUserOwnedGames(logic._userId);\n\n              case 7:\n                ownedGames = _context7.sent;\n                _context7.next = 10;\n                return logic.getUserPlays(logic._userId);\n\n              case 10:\n                plays = _context7.sent;\n                this.setState(function () {\n                  return {\n                    ownedGames: _toConsumableArray(ownedGames.data),\n                    plays: _toConsumableArray(plays)\n                  };\n                });\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var searchQuery = this.state.search.replace(/\\s+/g, '').toLowerCase();\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, this.state.error ? React.createElement(Snackbar, {\n        onCloseSnackbar: this.closeErrorSnackbarHandler,\n        message: this.state.error,\n        className: 'snackbar',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }) : null, React.createElement(GameInfoModal, {\n        onMechanicsClick: this.mechanicsClickHandler,\n        onClose: this.closeModalHandler,\n        show: this.state.showGameInfo,\n        onAdd: this.addHandler,\n        game: this.state.game,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }), React.createElement(PlaySaveModal, {\n        onClose: this.closePlaySaveModalHandler,\n        show: this.state.showPlaySaveModal,\n        onPlaySave: this.playSaveHandler,\n        game: this.state.game,\n        onError: this.playSaveErrorHandler,\n        onPictureUpload: this.pictureUploadHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }), React.createElement(PlayPicturesModal, {\n        onClose: this.closePlayPicturesModalHandler,\n        show: this.state.showPlayPicturesModal,\n        playPictures: this.state.playPictures,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"landing\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"header-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-expand-sm navbar-light bg-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"navbar-brand\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"Navbar\"), React.createElement(\"button\", {\n        className: \"navbar-toggler\",\n        type: \"button\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#navbarTogglerDemo02\",\n        \"aria-controls\": \"navbarTogglerDemo02\",\n        \"aria-expanded\": \"false\",\n        \"aria-label\": \"Toggle navigation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"navbar-toggler-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"collapse navbar-collapse\",\n        id: \"navbarTogglerDemo02\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"navbar-nav mr-auto mt-2 mt-sm-0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, \"BGG\")), logic.loggedIn ? React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        onClick: this.props.onLogoutClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, \"Sign out\")) : React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        onClick: this.handleSignInClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, \"Sing In\")), logic.loggedIn ? null : React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"nav-link\",\n        onClick: this.handleSignUpClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"Sign Up\"))))), React.createElement(\"div\", {\n        className: \"header__main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        className: \"filter_input\",\n        value: this.state.search,\n        type: \"text\",\n        onChange: this.updateSearch,\n        placeholder: \"type here to filter...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"main-navbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        onClick: function onClick() {\n          return _this2.navbarClickHandler('All Games');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, \"All Games\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356\n        },\n        __self: this\n      }, \"My Games\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, \"My Plays\")), React.createElement(GameList, {\n        onSavePlayClick: this.savePlayClickHandler,\n        onAddOrRemoveClick: this.addOrRemoveHandler,\n        onMoreInfoClick: this.moreInfoHandler,\n        games: this.state.allGames,\n        searchQuery: searchQuery,\n        loggedIn: logic.loggedIn,\n        title: 'All Games',\n        fromOwned: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }), this.state.page < this.state.pages ? React.createElement(\"h4\", {\n        className: \"gamelist__loadMore\",\n        onClick: this.loadMore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, \"Load more games...\") : null, logic.loggedIn ? React.createElement(GameList, {\n        onSavePlayClick: this.savePlayClickHandler,\n        onAddOrRemoveClick: this.addOrRemoveHandler,\n        onMoreInfoClick: this.moreInfoHandler,\n        games: this.state.ownedGames,\n        searchQuery: searchQuery,\n        loggedIn: logic.loggedIn,\n        title: 'My Games',\n        fromOwned: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }) : null, logic.loggedIn ? React.createElement(PlayList, {\n        onShowPlayPictures: this.showPlayPicturesHandler,\n        onPictureUpload: this.pictureUploadHandler,\n        onPlayDelete: this.playDeleteHandler,\n        plays: this.state.plays,\n        searchQuery: searchQuery,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }) : null), React.createElement(\"footer\", {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 409\n        },\n        __self: this\n      }, \" This is the footer \")));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/fedegomez/bootcamp/collab/skylab-bootcamp-201809/staff/fede-gomez/project/client/src/components/Home/Home.js"],"names":["React","Component","Snackbar","GameList","logic","PlayList","PlaySaveModal","PlayPicturesModal","BrowserRouter","Router","Route","Link","Redirect","withRouter","GameInfoModal","GAMES_PER_PAGE","Home","state","error","allGames","ownedGames","showGameInfo","showPlaySaveModal","showPlayPicturesModal","playPictures","game","search","plays","currentGames","currentPage","totalPages","page","pages","updateSearch","event","setState","target","value","changeHandler","console","log","moreInfoHandler","savePlayClickHandler","showPlayPicturesHandler","playId","getPlayPictures","length","closePlaySaveModalHandler","closePlayPicturesModalHandler","closeModalHandler","mechanicsClickHandler","mechanic","addOrRemoveHandler","fromOwned","gameId","removeGameFromOwnedGames","then","getUserOwnedGames","_userId","data","catch","err","message","addGameToOwnedGames","playSaveErrorHandler","playSaveHandler","notes","date","players","registerPlay","res","getUserPlays","pictureUploadHandler","file","files","addPictureToPlay","playDeleteHandler","deletePlay","closeErrorSnackbarHandler","loadMore","getAllGamesWithPagination","nextData","push","games","paginationData","goBackHandler","props","history","handleSignUpClick","handleSignInClick","loggedIn","searchQuery","replace","toLowerCase","addHandler","onLogoutClick","navbarClickHandler"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './Home.css'\nimport Snackbar from '../Snackbar/Snackbar'\nimport GameList from '../GameList/GameList'\nimport logic from '../../logic'\nimport PlayList from '../PlayList/PlayList'\nimport PlaySaveModal from '../PlaySaveModal/PlaySaveModal'\nimport PlayPicturesModal from '../PlayPicturesModal/PlayPicturesModal'\nimport { BrowserRouter as Router, Route, Link, Redirect, withRouter } from \"react-router-dom\"\nimport GameInfoModal from '../GameInfoModal/GameInfoModal'\n\nconst GAMES_PER_PAGE = 5\n\nclass Home extends Component {\n\n    state = {\n        error: null,\n        allGames: [],\n        ownedGames: [],\n        showGameInfo: false,\n        showPlaySaveModal: false,\n        showPlayPicturesModal: false,\n        playPictures: [],\n        game: {},\n        search: '',\n        plays: [],\n        currentGames: [],\n        currentPage: null,\n        totalPages: null,\n        page: 1,\n        pages: null\n    }\n\n    async componentDidMount() {\n\n        let res = await logic.getAllGamesWithPagination(1, GAMES_PER_PAGE)\n\n        this.setState(() => {\n            return ({\n                page: 1,\n                pages: res.data.paginationData.pages,\n                allGames: [...res.data.games]\n            })\n        })\n\n        if (logic.loggedIn) {\n            let ownedGames = await logic.getUserOwnedGames(logic._userId)\n            let plays = await logic.getUserPlays(logic._userId)\n\n            this.setState(() => {\n                return ({\n                    ownedGames: [...ownedGames.data],\n                    plays: [...plays]\n                })\n            })\n        }\n    }\n\n    updateSearch = (event) => {\n        this.setState({ search: event.target.value })\n    }\n\n    changeHandler = (event) => {\n        console.log(event.target.value)\n    }\n\n    moreInfoHandler = (game) => {\n        this.setState(() => {\n            return ({\n                game: { ...game },\n                showGameInfo: !this.state.showGameInfo\n            })\n        })\n    }\n\n    savePlayClickHandler = (game) => {\n        this.setState(() => {\n            return ({\n                game: { ...game },\n                showPlaySaveModal: !this.state.showPlaySaveModal\n            })\n        })\n    }\n\n    showPlayPicturesHandler = async (playId) => {\n        let playPictures = await logic.getPlayPictures(playId)\n        if (playPictures.length) {\n            this.setState(() => {\n                return ({\n                    playPictures: playPictures,\n                    showPlayPicturesModal: !this.state.showPlayPicturesModal\n                })\n            })\n        } else {\n            this.setState(() => {\n                return ({\n                    error: 'There are no pictures for this gameplay'\n                })\n            })\n        }\n    }\n\n    closePlaySaveModalHandler = () => {\n        this.setState(() => {\n            return ({\n                showPlaySaveModal: !this.state.showPlaySaveModal\n            })\n        })\n    }\n\n    closePlayPicturesModalHandler = () => {\n        this.setState(() => {\n            return ({\n                showPlayPicturesModal: !this.state.showPlayPicturesModal\n            })\n        })\n    }\n\n    closeModalHandler = () => {\n        this.setState(() => {\n            return ({\n                showGameInfo: !this.state.showGameInfo\n            })\n        })\n    }\n\n    mechanicsClickHandler = (mechanic) => {\n        console.log(mechanic)\n    }\n\n    addOrRemoveHandler = (fromOwned, gameId) => {\n\n        if (fromOwned) {\n\n            logic.removeGameFromOwnedGames(gameId)\n                .then(async () => {\n                    let ownedGames = await logic.getUserOwnedGames(logic._userId)\n                    this.setState(() => {\n                        return ({\n                            ownedGames: [...ownedGames.data]\n                        })\n                    })\n                })\n                .catch(err => {\n                    this.setState(() => {\n                        return ({\n                            error: err.message\n                        })\n                    })\n                })\n\n        } else {\n\n            logic.addGameToOwnedGames(gameId)\n                .then(async () => {\n                    let ownedGames = await logic.getUserOwnedGames(logic._userId)\n                    this.setState(() => {\n                        return ({\n                            ownedGames: [...ownedGames.data]\n                        })\n                    })\n                })\n                .catch(err => {\n                    this.setState(() => {\n                        return ({\n                            error: err.message\n                        })\n                    })\n                })\n\n\n        }\n    }\n\n    playSaveErrorHandler = err => {\n        this.setState(() => {\n            return ({\n                error: err\n            })\n        })\n    }\n\n    playSaveHandler = (notes, date, players, gameId) => {\n\n        logic.registerPlay(notes, date, players, gameId)\n            .then(async (res) => {\n                let plays = await logic.getUserPlays(logic._userId)\n                this.setState(() => {\n                    return ({\n                        error: res.message,\n                        plays: [...plays]\n                    })\n                })\n            })\n            .catch(err => this.setState({ error: err.message }))\n    }\n\n    // pictureUploadHandler = event => {\n    //     logic.addPictureToPlay(event.target.files[0], '5c069a7e25a4963363ac9e89')\n    //         .then((res) => {\n    //             debugger\n    //         })\n    //         .catch(err => this.setState({ error: err.message }))\n    // }\n\n    pictureUploadHandler = (event, playId) => {\n\n        let file = event.target[0].files[0]\n        logic.addPictureToPlay(file, playId)\n            .then(res => {\n                this.setState(() => {\n                    return ({\n                        error: res.message\n                    })\n                })\n            })\n            .catch(err => this.setState({ error: err.message }))\n    }\n\n\n    playDeleteHandler = (playId) => {\n\n        logic.deletePlay(playId)\n            .then(async (res) => {\n                let plays = await logic.getUserPlays(logic._userId)\n                this.setState(() => {\n                    return ({\n                        // error: res.message,\n                        plays: [...plays]\n                    })\n                })\n            })\n            .catch(err => this.setState({ error: err.message }))\n    }\n\n    closeErrorSnackbarHandler = () => {\n        this.setState(() => {\n            return ({\n                error: ''\n            })\n        })\n    }\n\n    loadMore = async () => {\n\n        const { page, allGames } = this.state\n        let nextData = await logic.getAllGamesWithPagination(page + 1, GAMES_PER_PAGE)\n\n        allGames.push(...nextData.data.games)\n\n        this.setState(() => {\n\n            return ({\n                page: nextData.data.paginationData.page,\n                allGames: [...allGames]\n            })\n        })\n    }\n\n    goBackHandler = () => this.props.history.push('/')\n\n    handleSignUpClick = () => this.props.history.push('/register')\n\n    handleSignInClick = () => this.props.history.push('/login')\n\n\n\n\n    render() {\n\n        let searchQuery = this.state.search.replace(/\\s+/g, '').toLowerCase()\n\n        return (\n            <div>\n                {\n                    this.state.error ?\n                        <Snackbar\n                            onCloseSnackbar={this.closeErrorSnackbarHandler}\n                            message={this.state.error}\n                            className={'snackbar'}\n                        />\n                        : null\n                }\n\n                <GameInfoModal\n                    onMechanicsClick={this.mechanicsClickHandler}\n                    onClose={this.closeModalHandler}\n                    show={this.state.showGameInfo}\n                    onAdd={this.addHandler}\n                    game={this.state.game}\n                />\n\n                <PlaySaveModal\n                    onClose={this.closePlaySaveModalHandler}\n                    show={this.state.showPlaySaveModal}\n                    onPlaySave={this.playSaveHandler}\n                    game={this.state.game}\n                    onError={this.playSaveErrorHandler}\n                    onPictureUpload={this.pictureUploadHandler}\n                />\n\n                <PlayPicturesModal\n                    onClose={this.closePlayPicturesModalHandler}\n                    show={this.state.showPlayPicturesModal}\n                    playPictures={this.state.playPictures}\n                />\n\n                <div className='landing' >\n                    <header className='header-container'>\n                        <nav className=\"navbar navbar-expand-sm navbar-light bg-light\">\n                            <p className=\"navbar-brand\">Navbar</p>\n                            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarTogglerDemo02\" aria-controls=\"navbarTogglerDemo02\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                                <span className=\"navbar-toggler-icon\" />\n                            </button>\n                            <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\n                                <ul className=\"navbar-nav mr-auto mt-2 mt-sm-0\">\n                                    <li className=\"nav-item\">\n                                        <p className=\"nav-link\" >BGG</p>\n                                    </li>\n                                    {logic.loggedIn ?\n                                        <li className=\"nav-item\">\n                                            <p className=\"nav-link\" onClick={this.props.onLogoutClick}>Sign out</p>\n                                        </li> :\n                                        <li className=\"nav-item\">\n                                            <p className=\"nav-link\" onClick={this.handleSignInClick}>Sing In</p>\n                                        </li>\n                                    }\n\n                                    {logic.loggedIn ?\n                                        null :\n                                        <li className=\"nav-item\">\n                                            <p className=\"nav-link\" onClick={this.handleSignUpClick}>Sign Up</p>\n                                        </li>\n                                    }\n\n                                </ul>\n                            </div>\n                        </nav>\n                        <div className='header__main'>\n                        </div>\n                    </header>\n\n                    {/********        ********/}\n                    {/******** Search ********/}\n                    {/********        ********/}\n                    <input\n                        className=\"filter_input\"\n                        value={this.state.search}\n                        type='text'\n                        onChange={this.updateSearch}\n                        placeholder='type here to filter...'\n                    />\n\n                    <div className=\"main-navbar\">\n                        <div onClick={()=> this.navbarClickHandler('All Games')}>All Games</div>\n                        <div>My Games</div>\n                        <div>My Plays</div>\n                    </div>\n\n                    <GameList\n                        onSavePlayClick={this.savePlayClickHandler}\n                        onAddOrRemoveClick={this.addOrRemoveHandler}\n                        onMoreInfoClick={this.moreInfoHandler}\n                        games={this.state.allGames}\n                        searchQuery={searchQuery}\n                        loggedIn={logic.loggedIn}\n                        title={'All Games'}\n                        fromOwned={false}\n                    />\n\n\n                    {this.state.page < this.state.pages ?\n                        <h4 className=\"gamelist__loadMore\" onClick={this.loadMore}>Load more games...</h4>\n                        : null\n                    }\n\n\n                    {logic.loggedIn ?\n\n                        <GameList\n                            onSavePlayClick={this.savePlayClickHandler}\n                            onAddOrRemoveClick={this.addOrRemoveHandler}\n                            onMoreInfoClick={this.moreInfoHandler}\n                            games={this.state.ownedGames}\n                            searchQuery={searchQuery}\n                            loggedIn={logic.loggedIn}\n                            title={'My Games'}\n                            fromOwned={true}\n                        />\n\n                        : null\n                    }\n                    {logic.loggedIn ?\n\n                        <PlayList\n                            onShowPlayPictures={this.showPlayPicturesHandler}\n                            onPictureUpload={this.pictureUploadHandler}\n                            onPlayDelete={this.playDeleteHandler}\n                            plays={this.state.plays}\n                            searchQuery={searchQuery}\n                        />\n\n                        : null\n                    }\n\n                </div>\n\n                <footer className='footer'>\n                    <h1> This is the footer </h1>\n                </footer>\n            </div>\n        )\n    }\n\n}\n\n\nexport default Home"]},"metadata":{},"sourceType":"module"}